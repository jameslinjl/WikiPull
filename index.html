<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <link rel="stylesheet" href="css/bootstrap.min.css">
        <style>
            body {
                padding-top: 50px;
                padding-bottom: 20px;
            }
        </style>
        <link rel="stylesheet" href="css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="css/main.css">
  <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.10.1.min.js"><\/script>')</script>

        <script src ="js/vendor/jquery-1.10.1.min.js"></script>

        <script type ="text/javascript">


var url = "https://en.wikipedia.org/w/api.php?action=query&prop=extlinks&ellimit=200&titles=Xinjiang&format=json";

var str = location.href;
var res = str.split("?");
var res = res[1].split("/");

console.log(res[0]);

$.getJSON('https://en.wikipedia.org/w/api.php?action=query&prop=extlinks&ellimit=200&titles='+res[0]+' &format=json&callback=?', function(result) {

		var title = $('#thetitle');
		if(res[0].length > 0)
			title.append($('<p>Here are all the external Wikipedia links for '+res[0]+'!</p>'))		
		else
			title.append($('<p>You did not select a Wikipedia article!</p>'))		


		var myresults = $('#myresults');
        var t = result.query.pages;
        for (var i in t)
        {
          if (t.hasOwnProperty(i))
          {
			count = 1
            for (var z in t[i].extlinks ){
				myresults.append($('<a href ="'+t[i].extlinks[z]['*']+'">'+count+'. '+t[i].extlinks[z]['*']+'</a><br><br>'));
				count = count + 1
			}	
          }
        }
    });

</script>
        <script src="js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">WikiPull</a>
        </div>
      </div>
    </div>

    <!-- Main jumbotron for a primary marketing message or call to action -->
    <div class="jumbotron">
		<h1><strong>WikiPull</h1>
        <div id="thetitle">
		</div>
		<p>Drag the link below into your bookmark toolbar and use it when you are on any Wikipedia article!</p>
		<a href = "javascript:%20%20var%20str%20=%20location.href;%20var%20tmp%20=%20str.split('#');%20str%20=%20tmp[0];%20%20var%20res%20=%20str.split('/');%20%20var%20last%20=%20res.length-1;%20%20var%20search%20=%20res[last];%20%20window.location='http://localhost:8000?'+search">WikiPull It!</a>
    </div>
    <div class="container">
      <!-- Example row of columns -->
      <div class="row">
        <div class="random" id="myresults">
        </div>
      </div>

      <hr>

      <footer>
        <p>&copy; D&J Mini-Product, Soli Deo Gloria</p>
      </footer>
    </div> <!-- /container -->        

        <script src="js/vendor/bootstrap.min.js"></script>

        <script src="js/main.js"></script>

        <script>
            var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src='//www.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>
    </body>
</html>
